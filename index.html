<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nepali Festival Countdown</title>
    <script src="https://cdn.jsdelivr.net/npm/three@0.167.1/build/three.min.js"></script>
    <style>
      body {
        background-color: #c51c1c;
        color: #e0e0e0;
        font-family: "Segoe UI", sans-serif;
        margin: 0;
        padding: 20px;
        /* overflow: hidden; To prevent scroll from 3D canvas */
        position: relative;
      }

      #background {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
      }

      h1 {
        text-align: center;
        margin-bottom: 30px;
        position: relative;
        z-index: 1;
      }

      .grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        max-width: 1200px;
        margin: auto;
        position: relative;
        z-index: 1;
      }

      .card {
        background-color: #ef3e3e; /* Semi-transparent for 3D background visibility */
        border-radius: 10px;
        padding: 20px;
        box-shadow: 0 0 10px rgba(255, 0, 0, 0.5);
        display: flex;
        flex-direction: column;
        align-items: center;
        transition: transform 0.3s ease-in-out, background-color 0.3s;
      }

      .card:hover {
        transform: translateY(-10px) rotate(2deg);
        background-color: #ef3e3e;
        box-shadow: 0 8px 0px white;
        transition: 0.3s ease-in-out;
      }

      .icon {
        font-size: 50px; /* Larger icons */
        margin-bottom: 15px;
        animation: bounce 1.5s infinite;
      }

      @keyframes bounce {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-5px);
        }
      }

      .name {
        font-weight: bold;
        font-size: 1.3em;
        text-align: center;
        margin-bottom: 10px;
      }

      .count {
        font-size: 1.1em;
        color: #ffffff; /* Gold color for countdown */
        animation: pulse 2s infinite;
      }
      /* Style the link container */
      .link-container {
        display: flex;
        justify-content: center;
        align-items: center;
        margin-bottom: 15px; /* Space between link and festival name */
      }

      /* If you're using image links, style the images */
      .festival-link {
        width: 100px; /* You can adjust the size based on your preference */
        height: 100px;
        object-fit: contain; /* Prevent stretching of the image */
        border-radius: 50%; /* Optional: to give a circular shape */
      }

/* If using text links (as text-based links, e.g., URLs), style them */
.festival-link {
  font-size: 20px;  /* Adjust font size for readability */
  color: inherit;  /* Make sure the text color matches the card */
  text-decoration: none;  /* Remove underline from text link */
}


      @keyframes pulse {
        0% {
          transform: scale(1);
          opacity: 1;
        }
        50% {
          transform: scale(1.05);
          opacity: 0.8;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }

      .passed {
        color: #888;
        animation: none;
      }

    @media (max-width: 768px) {
      .grid {
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      }
    }
  </style>
</head>
<body>
  <div id="background"></div>
  <h1>Nepali Festival Countdown</h1>
  <div class="grid" id="festivals"></div>

    <script>
      const festivals = [
        {
          name: "Nepali New Year / Mesh Sankranti / Biska Jatra",
          date: "2025-04-14",
          link: "https://img.freepik.com/premium-vector/happy-new-year-nepali-greeting_85216-204.jpg",
        },
        {
          name: "International Labour Day / Rato Matsyandranath Rath Yatra Prambha",
          date: "2025-05-01",
          icon: "💼",
        },
        {
          name: "Provincial Government Official Language Day / Kirat Samaj Sudhar Diwas",
          date: "2025-05-07",
          icon: "🗣️",
        },
        {
          name: "Buddha Jayanti / Ubhauli Parwa / Chandeshwari Jatra / Chandi Poornima / Kurma Jayanti / Gorakhnath Jayanti / Poornima Vrata / Baisakh Snan Samapti / International Nurses Day",
          date: "2025-05-12",
          icon: "☸️",
        },
        { name: "Republic Day", date: "2025-05-29", icon: "🇳🇵" },
        {
          name: "Bhoto Jatra (Kathmandu Valley Only) / Sithi Nakha / Global Day of Parents",
          date: "2025-06-01",
          icon: "🎭",
        },
        {
          name: "Nirjala Ekadashi Vrata / Bakar Eid",
          date: "2025-06-07",
          icon: "🌙",
        },
        {
          name: "Janai Poornima / Rakshya Bandhan / Kwati Khane Din / Poornima Vrata / Rishi Tarpani / Sanskrit Diwas / International Day of the World's Indigenous Peoples / International Soil Conservation Day",
          date: "2025-08-09",
          icon: "🧵",
        },
        {
          name: "Gaijatra (Bagmati Province only)",
          date: "2025-08-10",
          icon: "🐄",
        },
        {
          name: "Shree Krishna Janmashtami / Gorakhkali Puja",
          date: "2025-08-16",
          icon: "🎶",
        },
        { name: "Haritalika Teej", date: "2025-08-26", icon: "💃" },
        {
          name: "Radha Janmotsav / Gaura Parva / Gorakhkali Puja / Durwashtami / National Library Day",
          date: "2025-08-31",
          icon: "📚",
        },
        {
          name: "Indra Jatra / Ananta Chaturdashi Vrata",
          date: "2025-09-06",
          icon: "🎡",
        },
        {
          name: "Nawami Shraddha / Jitiya Parva",
          date: "2025-09-15",
          icon: "🙏",
        },
        {
          name: "Trayodashi Shraddha / Magha Shraddha / Sambidhan Diwas",
          date: "2025-09-19",
          icon: "📜",
        },
        {
          name: "Ghatasthaapana Vrata / Navaratri Arambha",
          date: "2025-09-22",
          icon: "🕉️",
        },
        { name: "Fulpati / World Heart Day", date: "2025-09-29", icon: "❤️" },
        {
          name: "Maha Ashtami Vrata / Kalratri / Gorakhkali Puja / Bhaumashtami Vrata",
          date: "2025-09-30",
          icon: "🕯️",
        },
        {
          name: "Maha Nawami Vrata / National Film Day / International Day of Older Persons",
          date: "2025-10-01",
          icon: "🎬",
        },
        {
          name: "Bijaya Dashami / Devi Bisharjan / World Non Violence Day",
          date: "2025-10-02",
          icon: "🐐",
        },
        {
          name: "Papakunsa Ekadashi Vrata / World Smile Day",
          date: "2025-10-03",
          icon: "😊",
        },
        {
          name: "Dashain Holiday / Shani Pradosh Vrata / World Animal Day",
          date: "2025-10-04",
          icon: "🐐",
        },
        {
          name: "Laxmi Pooja / Laxmi Prasad Devkota Janma Jayanti / Kukur Tihar / Narak Chaturdashi / Sukha Ratri",
          date: "2025-10-20",
          icon: "🪔",
        },
        { name: "Tihar Holiday", date: "2025-10-21", icon: "🕯️" },
        {
          name: "Gobardan Puja / Gaigoru Puja / Mha Puja / Hali Tihar / Nepal Sambat 1146 Starts",
          date: "2025-10-22",
          icon: "🐄",
        },
        { name: "Bhai Tika / Kija Pooja", date: "2025-10-23", icon: "🪔" },
        {
          name: "Tihar Holiday / UN Day / World Development Information Day",
          date: "2025-10-24",
          icon: "🌍",
        },
        { name: "Chhath Parva", date: "2025-10-27", icon: "🌅" },
        {
          name: "Poornima Vrata / Chaturmas Wrata Samapti / Kartik Snan Samapti / Guru Nanak Jayanti",
          date: "2025-11-05",
          icon: "🕉️",
        },
        { name: "Falgunanda Jayanti", date: "2025-11-11", icon: "🎉" },
        {
          name: "International Day of Disabled Persons",
          date: "2025-12-03",
          icon: "♿",
        },
        {
          name: "Poornima Vrata / Dhanya Poornima / Yomari Punhi / Jyapu Diwas",
          date: "2025-12-04",
          icon: "🍬",
        },
        { name: "Christmas", date: "2025-12-25", icon: "🎄" },
        {
          name: "Tamu Lhosar / Kavi Siromani Lekhnath Jayanti / Putrada Ekadashi Vrata",
          date: "2025-12-30",
          icon: "🥂",
        },
        {
          name: "Prithivi Jayanti / Rashtriya Ekata Diwas / Gorakhkali Puja",
          date: "2026-01-11",
          icon: "🇳🇵",
        },
        {
          name: "Makar Sankranti / Ghiu Chaku Khane Din / Uttarayan Arambha",
          date: "2026-01-15",
          icon: "🌞",
        },
        {
          name: "Sonam Lhochhar / Shree Ballav Jayanti",
          date: "2026-01-19",
          icon: "🎉",
        },
        {
          name: "Basanta Panchami Vrata / Saraswati Pooja",
          date: "2026-01-23",
          icon: "📚",
        },
        { name: "Sahid Diwas / Pradosh Vrata", date: "2026-01-30", icon: "🕊️" },
        {
          name: "Maha-Shivaratri / Army Day / Silachahre Puja",
          date: "2026-02-15",
          icon: "🕉️",
        },
        { name: "Gyalpo Lhosar", date: "2026-02-18", icon: "🥳" },
        {
          name: "Prajatantra Diwas / Election Day",
          date: "2026-02-19",
          icon: "🗳️",
        },
        {
          name: "Fagu Poornima / Holi / Poornima Vrata",
          date: "2026-03-02",
          icon: "🌈",
        },
        {
          name: "Fagu Poornima (Terai) / Khandagras Chandra Grahan / World Wildlife Day",
          date: "2026-03-03",
          icon: "🌍",
        },
        { name: "International Women's Day", date: "2026-03-08", icon: "♀️" },
        { name: "Ghode Jatra", date: "2026-03-18", icon: "🐎" },
        {
          name: "Shree Ram Nawami Vrata / World Theater Day",
          date: "2026-03-27",
          icon: "🎭",
        },
      ];

      function updateCountdown() {
        const now = new Date();
        // Separate upcoming and past festivals
        let upcoming = festivals.filter((f) => new Date(f.date) > now);
        let past = festivals.filter((f) => new Date(f.date) <= now);

        // Sort upcoming by date ascending (least days left first)
        upcoming.sort((a, b) => new Date(a.date) - new Date(b.date));

        // Sort past by date descending (most recent past first)
        past.sort((a, b) => new Date(b.date) - new Date(a.date));

        // Combine: upcoming first, then past
        const sortedFestivals = upcoming.concat(past);

        const container = document.getElementById("festivals");
        container.innerHTML = sortedFestivals
          .map((f) => {
            const target = new Date(f.date + "T00:00:00");
            const diff = target - now;
            let countText = "";
            let className = "count";
            if (diff <= 0) {
              countText = "Happening Now or Passed";
              className = "count passed";
            } else {
              const days = Math.floor(diff / (1000 * 60 * 60 * 24));
              const hrs = Math.floor((diff / (1000 * 60 * 60)) % 24);
              const mins = Math.floor((diff / (1000 * 60)) % 60);
              const secs = Math.floor((diff / 1000) % 60);
              countText = `${days}d ${hrs}h ${mins}m ${secs}s`;
            }

            return `
    <div class="card">
      <!-- Replace icon with a link -->
      <a href="${f.link}" target="_blank" class="link-container">
        <img src="${f.link}" alt="${f.name}" class="festival-link"/>
      </a>
      <div class="name">${f.name}</div>
      <div class="${className}">${countText}</div>
    </div>`;
          })
          .join("");
      }

      updateCountdown();
      setInterval(updateCountdown, 1000);

      // Three.js background animation: Festive particles
      const scene = new THREE.Scene();
      const camera = new THREE.PerspectiveCamera(
        75,
        window.innerWidth / window.innerHeight,
        0.1,
        1000
      );
      const renderer = new THREE.WebGLRenderer({ alpha: true }); // Transparent background
      renderer.setSize(window.innerWidth, window.innerHeight);
      document.getElementById("background").appendChild(renderer.domElement);

      const particles = 500;
      const geometry = new THREE.BufferGeometry();
      const positions = new Float32Array(particles * 3);
      const colors = new Float32Array(particles * 3);

      for (let i = 0; i < particles * 3; i += 3) {
        positions[i] = Math.random() * 200 - 100;
        positions[i + 1] = Math.random() * 200 - 100;
        positions[i + 2] = Math.random() * 200 - 100;

        // Random festive colors: red, green, blue, yellow, etc.
        const color = new THREE.Color();
        color.setHSL(Math.random(), 1, 0.5);
        colors[i] = color.r;
        colors[i + 1] = color.g;
        colors[i + 2] = color.b;
      }

      geometry.setAttribute(
        "position",
        new THREE.BufferAttribute(positions, 3)
      );
      geometry.setAttribute("color", new THREE.BufferAttribute(colors, 3));

      const material = new THREE.PointsMaterial({
        size: 0.5,
        vertexColors: true,
      });
      const points = new THREE.Points(geometry, material);
      scene.add(points);

      camera.position.z = 100;

      function animate() {
        requestAnimationFrame(animate);
        points.rotation.y += 0.0005; // Slow rotation for dynamic effect
        renderer.render(scene, camera);
      }

      animate();

      // Handle window resize
      window.addEventListener("resize", () => {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
      });
    </script>
  </body>
</html>
